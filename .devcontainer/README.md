# çŸ¥é“äº•å†ˆ DevContainer å¼€å‘æŒ‡å—

## ğŸš€ å®é™…å¼€å‘æµç¨‹

### **ç¬¬ä¸€æ¬¡å¯åŠ¨**
```bash
# 1. åœ¨VS Codeä¸­æ‰“å¼€DevContainer
# Ctrl+Shift+P â†’ "Dev Containers: Reopen in Container"

# 2. å¿«é€Ÿç¯å¢ƒæ£€æŸ¥
./.devcontainer/quick-check.sh

# 3. å¯åŠ¨å¼€å‘ç¯å¢ƒ
./.devcontainer/start.sh
```

### **æ—¥å¸¸å¼€å‘æµç¨‹**
```bash
# æ¯æ¬¡å¼€å‘å‰æ£€æŸ¥ç¯å¢ƒ
./.devcontainer/quick-check.sh

# å¦‚æœç¯å¢ƒæ­£å¸¸ï¼Œç›´æ¥å¯åŠ¨åº”ç”¨
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload

# å¦‚æœæœ‰é—®é¢˜ï¼Œä½¿ç”¨å¯åŠ¨è„šæœ¬
./.devcontainer/start.sh
```

## ğŸ› ï¸ è„šæœ¬ä½¿ç”¨æŒ‡å—

### **æ ¸å¿ƒè„šæœ¬ (æŒ‰ä½¿ç”¨é¢‘ç‡æ’åº)**

#### **1. `quick-check.sh` - ç¯å¢ƒçŠ¶æ€æ£€æŸ¥**
**ç”¨é€”**: å¿«é€Ÿæ£€æŸ¥å¼€å‘ç¯å¢ƒæ˜¯å¦å°±ç»ª
**ä½¿ç”¨åœºæ™¯**: æ¯æ¬¡å¼€å‘å‰ã€é—®é¢˜æ’æŸ¥
```bash
./.devcontainer/quick-check.sh
```
**è¾“å‡º**: æœåŠ¡çŠ¶æ€ã€ä¾èµ–çŠ¶æ€ã€å»ºè®®æ“ä½œ

#### **2. `start.sh` - åº”ç”¨å¯åŠ¨**
**ç”¨é€”**: ä¸€é”®å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ
**ä½¿ç”¨åœºæ™¯**: é¦–æ¬¡å¯åŠ¨ã€ç¯å¢ƒæœ‰é—®é¢˜æ—¶
```bash
./.devcontainer/start.sh
```
**åŠŸèƒ½**: ç­‰å¾…æœåŠ¡ â†’ æ£€æŸ¥è¿æ¥ â†’ è¿è¡Œè¿ç§» â†’ å¯åŠ¨åº”ç”¨

#### **3. `connect-db.sh` - æ•°æ®åº“æ“ä½œ**
**ç”¨é€”**: æ•°æ®åº“äº¤äº’å·¥å…·
**ä½¿ç”¨åœºæ™¯**: æŸ¥çœ‹æ•°æ®ã€æ‰§è¡ŒSQLã€æ£€æŸ¥è¡¨ç»“æ„
```bash
./.devcontainer/connect-db.sh
```
**åŠŸèƒ½**: 
- äº¤äº’å¼SQLæŸ¥è¯¢
- æ˜¾ç¤ºè¡¨ç»“æ„å’Œæ•°æ®
- æŸ¥çœ‹è¿ç§»å†å²
- æ•°æ®åº“å¤‡ä»½æŒ‡å¯¼

#### **4. `check-db.sh` - æ•°æ®åº“è¯Šæ–­**
**ç”¨é€”**: è¯¦ç»†çš„æ•°æ®åº“è¿æ¥è¯Šæ–­
**ä½¿ç”¨åœºæ™¯**: æ•°æ®åº“è¿æ¥é—®é¢˜æ’æŸ¥
```bash
./.devcontainer/check-db.sh
```
**åŠŸèƒ½**: 
- ç«¯å£è¿é€šæ€§æµ‹è¯•
- æ•°æ®åº“è®¤è¯æµ‹è¯•
- ä¾èµ–æ£€æŸ¥
- æ•…éšœæ’é™¤å»ºè®®

## ğŸ“‹ å¼€å‘å·¥ä½œæµç¨‹å›¾

```
å¼€å§‹å¼€å‘
    â†“
è¿è¡Œ quick-check.sh
    â†“
ç¯å¢ƒæ˜¯å¦å°±ç»ªï¼Ÿ
    â”œâ”€ æ˜¯ â†’ ç›´æ¥å¯åŠ¨åº”ç”¨ (uvicorn)
    â””â”€ å¦ â†’ è¿è¡Œ start.sh
               â†“
           åº”ç”¨å¯åŠ¨æˆåŠŸï¼Ÿ
               â”œâ”€ æ˜¯ â†’ å¼€å§‹å¼€å‘
               â””â”€ å¦ â†’ è¿è¡Œ check-db.sh æ’æŸ¥é—®é¢˜
```

## ğŸ¯ å®é™…ä½¿ç”¨åœºæ™¯

### **åœºæ™¯1: æ¯æ—¥å¼€å‘å¯åŠ¨**
```bash
# å¿«é€Ÿæ£€æŸ¥
./.devcontainer/quick-check.sh

# å¦‚æœæ˜¾ç¤º"ç¯å¢ƒå°±ç»ª"ï¼Œç›´æ¥å¯åŠ¨
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

### **åœºæ™¯2: é¦–æ¬¡æˆ–é—®é¢˜å¯åŠ¨**
```bash
# å®Œæ•´å¯åŠ¨æµç¨‹
./.devcontainer/start.sh
```

### **åœºæ™¯3: æ•°æ®åº“å¼€å‘**
```bash
# æŸ¥çœ‹è¡¨ç»“æ„
./.devcontainer/connect-db.sh
# é€‰æ‹© "5) æ˜¾ç¤ºè¡¨ç»“æ„"

# æ‰§è¡ŒSQLæŸ¥è¯¢
./.devcontainer/connect-db.sh
# é€‰æ‹© "2) æ‰§è¡Œå•ä¸ªSQLè¯­å¥"
```

### **åœºæ™¯4: é—®é¢˜æ’æŸ¥**
```bash
# è¯¦ç»†è¯Šæ–­
./.devcontainer/check-db.sh

# æŸ¥çœ‹æœåŠ¡æ—¥å¿— (åœ¨ä¸»æœºæ‰§è¡Œ)
docker-compose -f .devcontainer/docker-compose.yml logs db
docker-compose -f .devcontainer/docker-compose.yml logs redis
```

### **åœºæ™¯5: æ•°æ®åº“è¿ç§»**
```bash
# åˆ›å»ºè¿ç§»
alembic revision --autogenerate -m "æè¿°"

# åº”ç”¨è¿ç§»
alembic upgrade head

# æŸ¥çœ‹è¿ç§»å†å²
./.devcontainer/connect-db.sh
# é€‰æ‹© "6) æŸ¥çœ‹è¿ç§»å†å²"
```

## ğŸ”§ æ•…éšœæ’é™¤

### **å¸¸è§é—®é¢˜ & è§£å†³æ–¹æ¡ˆ**

#### **1. æœåŠ¡è¿æ¥å¤±è´¥**
```bash
# é—®é¢˜: PostgreSQL/Redis è¿æ¥å¤±è´¥
# è§£å†³: åœ¨ä¸»æœºå¯åŠ¨æœåŠ¡
docker-compose -f .devcontainer/docker-compose.yml up -d db redis
```

#### **2. ä¾èµ–ç¼ºå¤±**
```bash
# é—®é¢˜: PythonåŒ…å¯¼å…¥å¤±è´¥
# è§£å†³: å®‰è£…å¼€å‘ä¾èµ–
pip install -e .[dev]
```

#### **3. åº”ç”¨å¯åŠ¨å¤±è´¥**
```bash
# é—®é¢˜: FastAPIåº”ç”¨æ— æ³•å¯åŠ¨
# è§£å†³: æ£€æŸ¥è¯¦ç»†é”™è¯¯
./.devcontainer/check-db.sh

# æ‰‹åŠ¨å¯åŠ¨æŸ¥çœ‹é”™è¯¯
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

#### **4. æ•°æ®åº“è¿ç§»é—®é¢˜**
```bash
# é—®é¢˜: è¿ç§»å¤±è´¥
# è§£å†³: æ£€æŸ¥è¿ç§»çŠ¶æ€
alembic current
alembic history

# å¦‚æœéœ€è¦ï¼Œå›æ»šå¹¶é‡æ–°è¿ç§»
alembic downgrade -1
alembic upgrade head
```

## ğŸ“Š è®¿é—®åœ°å€

å¯åŠ¨æˆåŠŸåå¯è®¿é—®:
- **ğŸŒ APIæ–‡æ¡£**: http://localhost:8000/docs
- **ğŸ’“ å¥åº·æ£€æŸ¥**: http://localhost:8000/health
- **ğŸ“Š APIåŸºç¡€**: http://localhost:8000/api/v1
- **ğŸ“ˆ ç›‘æ§æŒ‡æ ‡**: http://localhost:8000/metrics

## ğŸ’¡ æœ€ä½³å®è·µ

1. **æ¯æ¬¡å¼€å‘å‰**: è¿è¡Œ `quick-check.sh` ç¡®ä¿ç¯å¢ƒæ­£å¸¸
2. **ä½¿ç”¨makeå‘½ä»¤**: `make run`, `make test`, `make format`
3. **æ•°æ®åº“æ“ä½œ**: ä¼˜å…ˆä½¿ç”¨ `connect-db.sh` è€Œä¸æ˜¯ç›´æ¥è¿æ¥
4. **é—®é¢˜æ’æŸ¥**: å…ˆç”¨ `quick-check.sh`ï¼Œå†ç”¨ `check-db.sh`
5. **ä¿æŒæ›´æ–°**: å®šæœŸè¿è¡Œ `pip install -e .[dev]` æ›´æ–°ä¾èµ–

## ğŸš¨ æ³¨æ„äº‹é¡¹

- è„šæœ¬åœ¨DevContainerå†…éƒ¨è¿è¡Œï¼Œä¸éœ€è¦docker-composeå‘½ä»¤
- æ•°æ®åº“å’ŒRedisæœåŠ¡åœ¨ä¸»æœºä¸Šè¿è¡Œï¼Œå®¹å™¨å†…é€šè¿‡ç½‘ç»œè¿æ¥
- å¦‚æœè„šæœ¬æƒé™é—®é¢˜ï¼Œåœ¨ä¸»æœºæ‰§è¡Œ: `chmod +x .devcontainer/*.sh`
- æ‰€æœ‰è„šæœ¬éƒ½é’ˆå¯¹DevContainerç¯å¢ƒä¼˜åŒ–ï¼Œä¸é€‚ç”¨äºæœ¬åœ°ç›´æ¥è¿è¡Œ

---

**å¿«é€Ÿå¼€å§‹**: è¿è¡Œ `./.devcontainer/quick-check.sh` æ£€æŸ¥ç¯å¢ƒï¼Œç„¶åæ ¹æ®æç¤ºè¿›è¡Œæ“ä½œï¼